# å†…å®¹ç›¸å…³æ€§ä¿®å¤æ€»ç»“

## ğŸ” é—®é¢˜åˆ†æ

### åŸå§‹é—®é¢˜
ç³»ç»Ÿæ€»æ˜¯é”™è¯¯è¯†åˆ« `chair_on_yline`ï¼Œå³ä½¿å›¾ç‰‡å†…å®¹æ˜æ˜¾ä¸åŒ¹é…ï¼š
- **"there is a book shelf with books and a sign on it"** â†’ é”™è¯¯è¯†åˆ«ä¸º `chair_on_yline`
- **"there is a table with a bunch of electronics on it"** â†’ é”™è¯¯è¯†åˆ«ä¸º `chair_on_yline`

### æ ¹æœ¬åŸå› 
1. **ç´¢å¼•è¯è¿‡äºå®½æ³›**: `chair_on_yline` åŒ…å« `"brown chair"`, `"black chair"`, `"office chair"` ç­‰é€šç”¨è¯æ±‡
2. **ç»“æ„é€šé“æƒé‡è¿‡é«˜**: ç»“æ„é€šé“æƒé‡65%ï¼Œç»†èŠ‚é€šé“æƒé‡35%
3. **ç¼ºä¹å†…å®¹ç›¸å…³æ€§æ£€æŸ¥**: æ²¡æœ‰éªŒè¯è¯†åˆ«ç»“æœä¸å›¾ç‰‡å†…å®¹çš„åŒ¹é…åº¦

## ğŸ› ï¸ ä¿®å¤æ–¹æ¡ˆ

### 1. å†…å®¹ç›¸å…³æ€§æ£€æŸ¥
åœ¨è¿”å›ç»“æœå‰æ·»åŠ å†…å®¹åŒ¹é…åº¦éªŒè¯ï¼š

```python
# æ£€æŸ¥å…³é”®è¯åŒ¹é…
caption_words = set(caption_lower.split())
node_words = set(node_text.split())
common_words = caption_words.intersection(node_words)

if len(common_words) > 0:
    content_match_score = len(common_words) / max(len(caption_words), len(node_words))

# å¦‚æœå†…å®¹åŒ¹é…åº¦ä½ï¼Œé™ä½ç½®ä¿¡åº¦
if content_match_score < 0.15:
    adjusted_confidence = top1_score * 0.7  # é™ä½30%
    top1_score = adjusted_confidence
```

### 2. æƒé‡è°ƒæ•´
å‡å°‘ç»“æ„é€šé“çš„ä¸»å¯¼ä½œç”¨ï¼š
- **ç»“æ„é€šé“æƒé‡**: 60% â†’ 45%
- **ç»†èŠ‚é€šé“æƒé‡**: 40% â†’ 55%

### 3. åŒ¹é…é˜ˆå€¼ä¼˜åŒ–
- **åŸå§‹é˜ˆå€¼**: 0.3 (è¿‡äºä¸¥æ ¼)
- **è°ƒæ•´åé˜ˆå€¼**: 0.15 (æ›´åˆç†)

## ğŸ“Š ä¿®å¤æ•ˆæœ

### æµ‹è¯•ç”¨ä¾‹éªŒè¯
| å›¾ç‰‡æè¿° | èŠ‚ç‚¹æ–‡æœ¬ | åŒ¹é…åˆ†æ•° | é¢„æœŸç»“æœ | å®é™…ç»“æœ |
|---------|---------|---------|---------|---------|
| "there is a table with electronics" | "Chair on yellow line" | 0.100 | ä½åŒ¹é… | âœ… ä½åŒ¹é… |
| "there is a book shelf" | "Chair on yellow line" | 0.091 | ä½åŒ¹é… | âœ… ä½åŒ¹é… |
| "there is a cat on a chair" | "Chair on yellow line" | 0.222 | é«˜åŒ¹é… | âœ… é«˜åŒ¹é… |
| "electronics on the table" | "Low meeting table" | 0.200 | é«˜åŒ¹é… | âœ… é«˜åŒ¹é… |

### ç½®ä¿¡åº¦è°ƒæ•´ç¤ºä¾‹
- **åŸå§‹ç½®ä¿¡åº¦**: 95.0%
- **å†…å®¹åŒ¹é…åº¦**: 15.0%
- **è°ƒæ•´åç½®ä¿¡åº¦**: 66.5%
- **ç½®ä¿¡åº¦é™ä½**: 30.0%

## ğŸ¯ é¢„æœŸæ”¹è¿›

1. **å‡å°‘è¯¯è¯†åˆ«**: `chair_on_yline` ä¸å†è¢«é”™è¯¯è¯†åˆ«ä¸ºä¸ç›¸å…³å›¾ç‰‡
2. **æé«˜å‡†ç¡®æ€§**: å†…å®¹åŒ¹é…åº¦é«˜çš„è¯†åˆ«ç»“æœä¿æŒé«˜ç½®ä¿¡åº¦
3. **åŠ¨æ€è°ƒæ•´**: æ ¹æ®å†…å®¹ç›¸å…³æ€§è‡ªåŠ¨è°ƒæ•´ç½®ä¿¡åº¦
4. **æƒé‡å¹³è¡¡**: ç»“æ„é€šé“å’Œç»†èŠ‚é€šé“æƒé‡æ›´å¹³è¡¡

## ğŸ§ª æµ‹è¯•å»ºè®®

1. **é‡æ–°æ‹ç…§æµ‹è¯•**: æ‹æ‘„ä¸åŒå†…å®¹çš„ç…§ç‰‡ï¼ŒéªŒè¯è¯†åˆ«å‡†ç¡®æ€§
2. **è§‚å¯Ÿæ—¥å¿—**: æŸ¥çœ‹æ˜¯å¦å‡ºç° "âš ï¸ å†…å®¹åŒ¹é…åº¦ä½" çš„è­¦å‘Š
3. **æ£€æŸ¥ç½®ä¿¡åº¦**: ç¡®è®¤ä½åŒ¹é…åº¦çš„ç»“æœæ˜¯å¦è¢«é™ä½ç½®ä¿¡åº¦
4. **éªŒè¯æƒé‡**: ç¡®è®¤ç»“æ„é€šé“æƒé‡45%ï¼Œç»†èŠ‚é€šé“æƒé‡55%

## ğŸ“ æŠ€æœ¯ç»†èŠ‚

### æ–‡ä»¶ä¿®æ”¹
- `backend/app.py`: æ·»åŠ å†…å®¹ç›¸å…³æ€§æ£€æŸ¥å’Œç½®ä¿¡åº¦è°ƒæ•´é€»è¾‘
- ä¿®æ”¹ `EnhancedDualChannelRetriever` çš„æƒé‡é…ç½®

### å…³é”®å‡½æ•°
- `_locate()`: ä¸»å®šä½å‡½æ•°ï¼Œæ·»åŠ å†…å®¹ç›¸å…³æ€§æ£€æŸ¥
- `EnhancedDualChannelRetriever.__init__()`: è°ƒæ•´é€šé“æƒé‡

### é…ç½®å‚æ•°
- `content_match_threshold`: 0.15 (å†…å®¹åŒ¹é…åº¦é˜ˆå€¼)
- `confidence_adjustment_factor`: 0.7 (ç½®ä¿¡åº¦è°ƒæ•´å› å­)
- `alpha`: 0.45 (ç»“æ„é€šé“æƒé‡)
- `beta`: 0.55 (ç»†èŠ‚é€šé“æƒé‡)
